{% extends 'base.html.twig' %}

{% block content %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>
</head>
<style>
*{
    margin: 0;
    padding: 0;
}
.rate {
    float: left;
    height: 46px;
    padding: 0 10px;
}
.rate:not(:checked) > input {
    position:absolute;
    top:-9999px;
}
.rate:not(:checked) > label {
    float:right;
    width:1em;
    overflow:hidden;
    white-space:nowrap;
    cursor:pointer;
    font-size:30px;
    color:#ccc;
}
.rate:not(:checked) > label:before {
    content: 'â˜… ';
}
.rate > input:checked ~ label {
    color: #ffc700;    
}
.rate:not(:checked) > label:hover,
.rate:not(:checked) > label:hover ~ label {
    color: #deb217;  
}
.rate > input:checked + label:hover,
.rate > input:checked + label:hover ~ label,
.rate > input:checked ~ label:hover,
.rate > input:checked ~ label:hover ~ label,
.rate > label:hover ~ input:checked ~ label {
    color: #c59b08;
}


</style>
    {% include 'content/sidebar.html.twig' %}

<body>
<div class="container mt-5">
    <div class="row">
        <div class="col-md-6 offset-md-3">
            <h1 class="text-center text-primary"><i class="bi bi-calendar"></i> {{ event.eventName }}</h1>
            
        </div>
    </div>
</div>

<div class="container mb-5">
    <div class="row align-items-stretch">
        <div class="col-md-6">
            <div class="card h-100 shadow">
                <div class="card-body">
                    <h2 class="card-title"><i class="bi bi-geo-alt"></i> Address:</h2>
                    <p class="card-text">{{ event.address }}</p>
                    <h2 class="card-title"><i class="bi bi-calendar"></i> Date:</h2>
                    <p class="card-text">{{ event.date ? event.date|date('F j, Y') : '' }}</p>
                    <h2 class="card-title"><i class="bi bi-clock"></i> Time:</h2>
                    <p class="card-text">{{ event.time ? event.time|date('H:i') : '' }}</p>
                    <h2 class="card-title"><i class="bi bi-geo-alt"></i> Location:</h2>
                    <p class="card-text">{{ event.location }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
    {% if event.image %}
        <img src="{{ asset('uploads/images/' ~ event.image) }}" alt="Event Image" class="img-fluid rounded mx-auto d-block h-100"> 
    {% else %}
        <p>No image available</p>
    {% endif %}
</div>

    </div>
</div>

        <div class="container mb-5">
            <div class="row">
               <div class="card shadow">
                 <div class="card-body">
                    <h2 class="card-title"><i class="bi bi-flag"></i> Objective:</h2>
                    <p class="card-text">{{ event.objective }}</p>
                    <h2 class="card-title"><i class="bi bi-card-text"></i> Description:</h2>
                    <p class="card-text">{{ event.description }}</p>
                  </div>
               </div>
            </div>
        </div>

<div class="container mb-5">
    <div class="row">
        <div class="col-md-12 text-center">
            <p class="lead">Want to participate? Enroll here!</p>
            <a href="#" class="btn btn-primary btn-lg">Enroll</a>
        </div>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <h5 class="card-title">Rate this item</h5>
        <div class="rate">
    <input type="radio" id="star5" name="rate" value="5" />
    <label for="star5" title="text">5 stars</label>
    <input type="radio" id="star4" name="rate" value="4" />
    <label for="star4" title="text">4 stars</label>
    <input type="radio" id="star3" name="rate" value="3" />
    <label for="star3" title="text">3 stars</label>
    <input type="radio" id="star2" name="rate" value="2" />
    <label for="star2" title="text">2 stars</label>
    <input type="radio" id="star1" name="rate" value="1" />
    <label for="star1" title="text">1 star</label>
</div>
        <button id="submitRatingBtn" class="btn btn-primary">Submit Rating</button>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get the submit rating button
    const submitBtn = document.getElementById('submitRatingBtn');

    // Add event listener to the submit rating button
    submitBtn.addEventListener('click', function(event) {
        console.log('Submit button clicked!'); // Check if the click event is being triggered

        // Get the selected rating value
        const ratingInputs = document.querySelectorAll('input[name="rate"]');
        let ratingValue = null;
        ratingInputs.forEach(function(input) {
            if (input.checked) {
                ratingValue = input.value;
            }
        });

        if (ratingValue !== null) {
            console.log('Selected rating:', ratingValue);

            // Send rating value to the backend via AJAX
            submitRatingToBackend(ratingValue);
        } else {
            console.error('No rating selected!');
        }
    });

    function submitRatingToBackend(ratingValue) {
       // Make an AJAX request to your Symfony controller
$.ajax({
    type: 'POST',
    url: '/save-rating',
    data: { rate: ratingValue },
    dataType: 'json',
    success: function(response) {
        console.log('Rating submitted successfully:', response);
        // You can perform further actions here if needed
    },
    error: function(xhr, status, error) {
        console.error('Failed to submit rating:', error);
    }
});

    }
});

</script>

</html>
{% endblock %}
